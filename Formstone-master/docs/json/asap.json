{"main":["asap.js"],"options":[{"name":"cache","type":"boolean","default":"true","description":"Flag to cache AJAX responses"},{"name":"selector","type":"string","default":"'a'","description":"Target DOM Selector"},{"name":"render","type":"function","default":"$.noop","description":"Custom render function"},{"name":"requestKey","type":"string","default":"'fs-asap'","description":"GET variable for requests"},{"name":"transitionOut","type":"function","default":"$.noop","description":"Transition timing callback; should return user defined $.Deferred object, which must eventually resolve"}],"events":[{"name":"requested.asap","description":"Before request is made; triggered on window; Second parameter 'true' if pop event"},{"name":"progress.asap","description":"As request is loaded; triggered on window; Second parameter contains percentage complete"},{"name":"loaded.asap","description":"After request is loaded; triggered on window"},{"name":"rendered.asap","description":"After state is rendered; triggered on window"},{"name":"failed.asap","description":"After load error; triggered on window"}],"methods":[{"name":"load","description":"Loads new page","params":[{"name":"opts","type":"url","default":"''","description":"URL to load"}],"examples":["$.asap(\"load\", \"http://example.com/page/\");"]},{"name":"replace","description":"Updates current url in history","params":[{"name":"url","type":"string","default":"''","description":"New URL"}],"examples":["$.asap(\"replace\", \"http://example.com/page/\");"]}],"name":"ASAP","type":"utility","description":"A jQuery plugin for asynchronous page loads.","dependencies":["jQuery","core.js","analytics.js"],"use":"### Basic\n\nASAP can progressively enhance a site to request page content via AJAX, reducing overall page load time. The site must be tuned to return a properly formed JSON object containing key-value pairs. Keys should be valid selectors as they will be used to match DOM nodes. The value should contain the new content to render. This allows the developer to only update the parts of the page that change while leaving global elements, such as headers and footers, in place.\n\n```php\n<?php\n\nob_start();\n\n$page_title = \"Page Title\";\n\nif ($_GET[\"fs-asap\"]) {\n\tdefine(\"IS_ASAP\", true);\n}\n\nif (!IS_ASAP) {\n\t// Draw Header\n?>\n<html>\n\t<head>\n\t\t...\n\t</head>\n\t<body>\n\t\t<div id=\"page_content\">\n<?\n}\n\n// Always Draw Content\n?>\n<h1>Page Title</h1>\n<?\n\nif (!IS_ASAP) {\n\t// Draw footer\n?>\n\t\t</div>\n\t</body>\n</html>\n<?\n}\n\n$page_content = ob_get_clean();\n\nif (IS_ASAP) {\n\techo json_encode(array(\n\t\t\"title\" => $page_title,\n\t\t\"#page_content\" => $page_content,\n\t));\n\tdie();\n} else {\n\techo $content;\n}\n\n?>\n```\n\n### Events\n\nOnly updating parts of a page also means static resources, like CSS and Javascript, are only loaded and executed once. Developers can hook into the ASAP events to ensure the page is rendered and destroyed properly:\n\n```javascript\n$(window).on(\"requested.asap\", function(e) {\n\t// Before request is made.\n}).on(\"progress.asap\", function (e) {\n\t// As request is loaded. \n}).on(\"loaded.asap\", function (e) {\n\t// After request is loaded. Tear down any existing plugins.\n}).on(\"loaded.asap\", function (e) {\n\t// After state is rendered. Initialize any new plugins.\n}).on(\"failed.asap\", function (e) {\n\t// After load error.\n});\n```\n\n","demo":"<a href=\"../site/extra/asap/\" target=\"_blank\">Launch the Demo</a>\r\n"}