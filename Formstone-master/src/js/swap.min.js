!function(e,t,i){"use strict";function n(t){t.enabled=!1,t.active=!1,t.classes=e.extend(!0,{},f,t.classes),t.target=this.data(p+"-target"),t.$target=e(t.target).addClass(t.classes.raw.target),t.mq="(max-width:"+(t.maxWidth===1/0?"100000px":t.maxWidth)+")";var i=this.data(p+"-linked");t.linked=i?"[data-"+p+'-linked="'+i+'"]':!1;var n=this.data(p+"-group");t.group=n?"[data-"+p+'-group="'+n+'"]':!1,t.$swaps=e().add(this).add(t.$target),this.on(h.click+t.dotGuid,t,d)}function a(t){t.collapse||!t.group||e(t.group).filter("[data-"+p+"-active]").length||e(t.group).eq(0).attr("data-"+p+"-active","true"),t.onEnable=this.data(p+"-active")||!1,e.fsMediaquery("bind",t.rawGuid,t.mq,{enter:function(){l.call(t.$el,t,!0)},leave:function(){c.call(t.$el,t,!0)}})}function o(t){e.fsMediaquery("unbind",t.rawGuid),t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")).off(h.namespace)}function r(t,i){if(t.enabled&&!t.active){t.group&&!i&&e(t.group).not(t.$el).not(t.linked)[u.namespaceClean]("deactivate",!0);var n=t.group?e(t.group).index(t.$el):null;t.$swaps.addClass(t.classes.raw.active),i||t.linked&&e(t.linked).not(t.$el)[u.namespaceClean]("activate",!0),this.trigger(h.activate,[n]),t.active=!0}}function s(t,i){t.enabled&&t.active&&(t.$swaps.removeClass(t.classes.raw.active),i||t.linked&&e(t.linked).not(t.$el)[u.namespaceClean]("deactivate",!0),this.trigger(h.deactivate),t.active=!1)}function l(t,i){t.enabled||(t.enabled=!0,t.$swaps.addClass(t.classes.raw.enabled),i||e(t.linked).not(t.$el)[u.namespaceClean]("enable"),this.trigger(h.enable),t.onEnable?(t.active=!1,r.call(this,t)):(t.active=!0,s.call(this,t)))}function c(t,i){t.enabled&&(t.enabled=!1,t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")),i||e(t.linked).not(t.$el)[u.namespaceClean]("disable"),this.trigger(h.disable))}function d(e){g.killEvent(e);var t=e.data;t.active&&t.collapse?s.call(t.$el,t):r.call(t.$el,t)}var u=t.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:n,_postConstruct:a,_destruct:o,activate:r,deactivate:s,enable:l,disable:c}}),p=u.namespace,f=u.classes,h=u.events,g=u.functions}(jQuery,Formstone);