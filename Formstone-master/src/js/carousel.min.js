!function(e,t,n){"use strict";function i(e){N.iterate.call(O,c)}function a(){O=e(P.base)}function o(n){var i,o=[I.base,n.customClass,n.rtl?I.rtl:I.ltr];n.maxWidth=n.maxWidth===1/0?"100000px":n.maxWidth,n.mq="(min-width:"+n.minWidth+") and (max-width:"+n.maxWidth+")",n.customControls="object"===e.type(n.controls)&&n.controls.previous&&n.controls.next,t.support.transform||(n.useMargin=!0);var r="",c="",u=[I.control,I.control_previous].join(" "),p=[I.control,I.control_next].join(" ");if(n.controls&&!n.customControls&&(r+='<div class="'+I.controls+'">',r+='<button type="button" class="'+u+'">'+n.labels.previous+"</button>",r+='<button type="button" class="'+p+'">'+n.labels.next+"</button>",r+="</div>"),n.pagination&&(c+='<div class="'+I.pagination+'">',c+="</div>"),n.autoHeight&&o.push(I.auto_height),n.contained&&o.push(I.contained),n.single&&o.push(I.single),this.addClass(o.join(" ")).wrapInner('<div class="'+I.wrapper+'"><div class="'+I.container+'"><div class="'+I.canister+'"></div></div></div>').append(r).wrapInner('<div class="'+I.viewport+'"></div>').append(c),n.$viewport=this.find(P.viewport).eq(0),n.$container=this.find(P.container).eq(0),n.$canister=this.find(P.canister).eq(0),n.$pagination=this.find(P.pagination).eq(0),n.$paginationItems=n.$pagination.find(P.page),n.$controlPrevious=n.$controlNext=e(""),n.customControls?(n.$controls=e(n.controls.container).addClass([I.controls,I.controls_custom].join(" ")),n.$controlPrevious=e(n.controls.previous).addClass(u),n.$controlNext=e(n.controls.next).addClass(p)):(n.$controls=this.find(P.controls).eq(0),n.$controlPrevious=n.$controls.find(P.control_previous),n.$controlNext=n.$controls.find(P.control_next)),n.$controlItems=n.$controlPrevious.add(n.$controlNext),n.index=0,n.enabled=!1,n.leftPosition=0,n.autoTimer=null,n.resizeTimer=null,"object"===e.type(n.show)){var f=n.show,h=[],g=[];for(i in f)f.hasOwnProperty(i)&&g.push(i);g.sort(N.sortAsc);for(i in g)g.hasOwnProperty(i)&&h.push({width:parseInt(g[i]),count:f[g[i]],mq:window.matchMedia("(min-width: "+parseInt(g[i])+"px)")});n.show=h}d(n),e.fsMediaquery("bind",n.rawGuid,n.mq,{enter:function(){l.call(n.$el,n)},leave:function(){s.call(n.$el,n)}}),a()}function r(t){N.clearTimer(t.autoTimer),N.startTimer(t.resizeTimer),s.call(this,t),e.fsMediaquery("unbind",t.rawGuid),t.$controlItems.removeClass([P.control,I.control_previous,P.control_next,P.visible].join(" ")).off(D.namespace),t.$images.off(D.namespace),t.$canister.fsTouch("destroy"),t.$items.removeClass([I.item,I.visible,P.item_previous,P.item_next].join(" ")).unwrap().unwrap().unwrap().unwrap(),t.pagination&&t.$pagination.remove(),t.controls&&!t.customControls&&t.$controls.remove(),t.customControls&&t.$controls.removeClass([I.controls,I.controls_custom,I.visible].join(" ")),this.removeClass([I.base,I.ltr,I.rtl,I.enabled,I.animated,I.contained,I.single,I.auto_height,I.customClass].join(" ")),a()}function s(e){e.enabled&&(N.clearTimer(e.autoTimer),e.enabled=!1,this.removeClass([I.enabled,I.animated].join(" ")).off(D.namespace),e.$canister.fsTouch("destroy").off(D.namespace).attr("style","").css(A,"none"),e.$items.css({width:"",height:""}).removeClass([I.visible,P.item_previous,P.item_next].join(" ")),e.$images.off(D.namespace),e.$controlItems.off(D.namespace),e.$pagination.html(""),$(e),e.useMargin?e.$canister.css({marginLeft:""}):e.$canister.css(q,""),e.index=0)}function l(e){e.enabled||(e.enabled=!0,this.addClass(I.enabled).on(D.click,P.page,e,y),e.$controlItems.on(D.click,e,b),e.$canister.fsTouch({axis:"x",pan:!0,swipe:!0}).on(D.panStart,e,T).on(D.pan,e,H).on(D.panEnd,e,E).on(D.swipe,e,W).css(A,""),d(e),e.$images.on(D.load,e,m),e.autoAdvance&&(e.autoTimer=N.startTimer(e.autoTimer,e.autoTime,function(){v(e)},!0)),c.call(this,e))}function c(e){if(e.enabled){var t,n,i,a,o,r,s,l;if(e.count=e.$items.length,e.count<1)return $(e),void e.$canister.css({height:""});for(this.removeClass(I.animated),e.containerWidth=e.$container.outerWidth(!1),e.visible=k(e),e.perPage=e.paged?1:e.visible,e.itemMargin=parseInt(e.$items.eq(0).css("marginRight"))+parseInt(e.$items.eq(0).css("marginLeft")),isNaN(e.itemMargin)&&(e.itemMargin=0),e.itemWidth=(e.containerWidth-e.itemMargin*(e.visible-1))/e.visible,e.itemHeight=0,e.pageWidth=e.paged?e.itemWidth:e.containerWidth,e.pageCount=Math.ceil(e.count/e.perPage),e.canisterWidth=(e.pageWidth+e.itemMargin)*e.pageCount,e.$canister.css({width:e.canisterWidth,height:""}),e.$items.css({width:e.itemWidth,height:""}).removeClass([I.visible,I.item_previous,I.item_next].join(" ")),e.pages=[],n=0,i=0;n<e.count;n+=e.perPage){for(o=e.$items.slice(n,n+e.perPage),s=0,o.length<e.perPage&&(o=0===n?e.$items:e.$items.slice(e.$items.length-e.perPage)),r=e.rtl?o.eq(o.length-1):o.eq(0),l=r.position().left,a=0;a<o.length;a++)t=o.eq(a).outerHeight(),t>s&&(s=t);e.pages.push({left:e.rtl?l-(e.canisterWidth-e.pageWidth-e.itemMargin):l,height:s,$items:o}),s>e.itemHeight&&(e.itemHeight=s),i++}e.paged&&(e.pageCount-=e.count%e.visible),e.pageCount<=0&&(e.pageCount=1),e.maxMove=-e.pages[e.pageCount-1].left,e.autoHeight?e.$canister.css({height:e.pages[0].height}):e.matchHeight&&e.$items.css({height:e.itemHeight});var c="";for(n=0;n<e.pageCount;n++)c+='<button type="button" class="'+I.page+'">'+(n+1)+"</button>";e.$pagination.html(c),e.pageCount<=1?$(e):x(e),e.$paginationItems=e.$el.find(P.page),w(e,e.index,!1),setTimeout(function(){e.$el.addClass(I.animated)},5)}}function d(e){e.$items=e.$canister.children().not(":hidden").addClass(I.item),e.$images=e.$canister.find("img"),e.totalImages=e.$images.length}function u(e){e.enabled&&p.call(this,e,!1)}function p(e,t){e.$images.off(D.namespace),t!==!1&&e.$canister.html(t),e.index=0,d(e),c.call(this,e)}function f(e,t,n){e.enabled&&(N.clearTimer(e.autoTimer),w(e,t-1,!0,n))}function h(e){var t=e.index-1;e.infinite&&0>t&&(t=e.pageCount-1),w(e,t)}function g(e){var t=e.index+1;e.infinite&&t>=e.pageCount&&(t=0),w(e,t)}function m(e){var t=e.data;t.resizeTimer=N.startTimer(t.resizeTimer,20,function(){c.call(t.$el,t)})}function v(e){var t=e.index+1;t>=e.pageCount&&(t=0),w(e,t)}function b(t){N.killEvent(t);var n=t.data,i=n.index+(e(t.currentTarget).hasClass(I.control_next)?1:-1);N.clearTimer(n.autoTimer),w(n,i)}function y(t){N.killEvent(t);var n=t.data,i=n.$paginationItems.index(e(t.currentTarget));N.clearTimer(n.autoTimer),w(n,i)}function w(e,t,n,i){if(0>t&&(t=e.infinite?e.pageCount-1:0),t>=e.pageCount&&(t=e.infinite?0:e.pageCount-1),!(e.count<1)){e.pages[t]&&(e.leftPosition=-e.pages[t].left),e.leftPosition=M(e,e.leftPosition),e.useMargin?e.$canister.css({marginLeft:e.leftPosition}):n===!1?(e.$canister.css(A,"none").css(q,"translateX("+e.leftPosition+"px)"),setTimeout(function(){e.$canister.css(A,"")},5)):e.$canister.css(q,"translateX("+e.leftPosition+"px)"),e.$items.removeClass([I.visible,I.item_previous,I.item_next].join(" "));for(var a=0,o=e.pages.length;o>a;a++)a===t?e.pages[a].$items.addClass(I.visible):e.pages[a].$items.not(e.pages[t].$items).addClass(t>a?I.item_previous:I.item_next);e.autoHeight&&e.$canister.css({height:e.pages[t].height}),n!==!1&&i!==!0&&t!==e.index&&(e.infinite||t>-1&&t<e.pageCount)&&e.$el.trigger(D.update,[t]),e.index=t,C(e)}}function $(e){e.$controls.removeClass(I.visible),e.$controlItems.removeClass(I.visible),e.$pagination.removeClass(I.visible)}function x(e){e.$controls.addClass(I.visible),e.$controlItems.addClass(I.visible),e.$pagination.addClass(I.visible)}function C(e){e.$paginationItems.removeClass(I.active).eq(e.index).addClass(I.active),e.infinite?e.$controlItems.addClass(I.visible):e.pageCount<1?e.$controlItems.removeClass(I.visible):(e.$controlItems.addClass(I.visible),e.index<=0?e.$controlPrevious.removeClass(I.visible):(e.index>=e.pageCount-1||!e.single&&e.leftPosition===e.maxMove)&&e.$controlNext.removeClass(I.visible))}function k(n){var i=1;if(n.single)return i;if("array"===e.type(n.show))for(var a in n.show)n.show.hasOwnProperty(a)&&(t.support.nativeMatchMedia?n.show[a].mq.matches&&(i=n.show[a].count):n.show[a].width<t.fallbackWidth&&(i=n.show[a].count));else i=n.show;return n.fill&&n.count<i?n.count:i}function T(e){var t=e.data;if(t.useMargin)t.leftPosition=parseInt(t.$canister.css("marginLeft"));else{var n=t.$canister.css(q).split(",");t.leftPosition=parseInt(n[4])}t.$canister.css(A,"none"),H(e),t.isTouching=!0}function H(e){var t=e.data;t.touchLeft=M(t,t.leftPosition+e.deltaX),t.useMargin?t.$canister.css({marginLeft:t.touchLeft}):t.$canister.css(q,"translateX("+t.touchLeft+"px)")}function E(e){var t=e.data,n=_(t,e),i=e.deltaX>-50&&e.deltaX<50?t.index:t.index+n;j(t,i)}function W(e){var t=e.data,n=_(t,e),i=t.index+n;j(t,i)}function j(e,t){e.$canister.css(A,""),w(e,t),e.isTouching=!1}function M(e,t){return isNaN(t)?t=0:e.rtl?(t>e.maxMove&&(t=e.maxMove),0>t&&(t=0)):(t<e.maxMove&&(t=e.maxMove),t>0&&(t=0)),t}function _(e,t){return e.rtl?"right"===t.directionX?1:-1:"left"===t.directionX?1:-1}var S=t.Plugin("carousel",{widget:!0,defaults:{autoAdvance:!1,autoHeight:!1,autoTime:8e3,contained:!0,controls:!0,customClass:"",fill:!1,infinite:!1,labels:{next:"Next",previous:"Previous"},matchHeight:!1,maxWidth:1/0,minWidth:"0px",paged:!1,pagination:!0,show:1,single:!1,rtl:!1,useMargin:!1},classes:["ltr","rtl","viewport","wrapper","container","canister","item","item_previous","item_next","controls","controls_custom","control","control_previous","control_next","pagination","page","animated","enabled","visible","active","auto_height","contained","single"],events:{update:"update"},methods:{_construct:o,_destruct:r,_resize:i,disable:s,enable:l,jump:f,previous:h,next:g,reset:u,resize:c,update:p}}),P=S.classes,I=P.raw,D=S.events,N=S.functions,O=[],q=t.transform,A=t.transition}(jQuery,Formstone);