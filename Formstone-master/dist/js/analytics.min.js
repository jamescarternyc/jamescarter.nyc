!function(e,t,n){"use strict";function i(){x=t.$body}function o(){y.scrollDepth&&u()}function a(){if(arguments.length&&"object"!==e.type(arguments[0]))if("destroy"===arguments[0])s.apply(this);else{var t=Array.prototype.slice.call(arguments,1);switch(arguments[0]){case"pageview":h.apply(this,t);break;case"event":f.apply(this,t)}}else r.apply(this,arguments);return null}function r(t){!T&&x.length&&(T=!0,y=e.extend(y,t||{}),y.autoEvents&&x.find("a").not("["+E+"]").each(l),y.scrollDepth&&(u(),w.on(C.scroll,c).one(C.load,o)),x.on(C.click,"*["+E+"]",p))}function s(){T&&x.length&&(w.off(C.namespace),x.off(C.namespace),T=!1)}function l(){var t,i=e(this),o="undefined"!==e.type(i[0].href)?i[0].href:"",a=document.domain.split(".").reverse(),r=null!==o.match(a[1]+"."+a[0]);if(o.match(/^mailto\:/i))t="Email, Click, "+o.replace(/^mailto\:/i,"");else if(o.match(/^tel\:/i))t="Telephone, Click, "+o.replace(/^tel\:/i,"");else if(o.match(y.filetypes)){var s=/[.]/.exec(o)?/[^.]+$/.exec(o):n;t="File, Download:"+s[0]+", "+o.replace(/ /g,"-")}else r||(t="ExternalLink, Click, "+o);t&&i.attr(E,t)}function c(){$.startTimer(j,250,d)}function d(){for(var e,n=w.scrollTop()+t.windowHeight,i=1/y.scrollStops,o=i,a=1;a<=y.scrollStops;a++)e=Math.round(100*o).toString(),!S[H][e].passed&&n>S[H][e].edge&&(S[H][e].passed=!0,f({eventCategory:"ScrollDepth",eventAction:H,eventLabel:e})),o+=i}function u(){var t,n=e.mediaquery("state"),i=x.outerHeight(),o={},a=1/y.scrollStops,r=a,s=0;n.minWidth&&(H="MinWidth:"+n.minWidth+"px");for(var l=1;l<=y.scrollStops;l++)s=parseInt(i*r),t=Math.round(100*r).toString(),o[t]={edge:"100"===t?s-10:s,passsed:S[H]&&S[H][t]?S[H][t].passed:!1},r+=a;S[H]=o}function p(t){var n=e(this),i=n.attr("href"),o=n.data(k).split(",");y.eventCallback&&t.preventDefault();for(var a in o)o.hasOwnProperty(a)&&(o[a]=e.trim(o[a]));f({eventCategory:o[0],eventAction:o[1],eventLabel:o[2]||i,eventValue:o[3],nonInteraction:o[4]},n)}function f(t,n){var i=(b.location,e.extend({hitType:"event"},t));if("undefined"!==e.type(n)&&!n.attr("data-analytics-stop")){var o="undefined"!==e.type(n[0].href)?n[0].href:"",a=!o.match(/^mailto\:/i)&&!o.match(/^tel\:/i)&&o.indexOf(":")<0?b.location.protocol+"//"+b.location.hostname+"/"+o:o;if(""!==a){var r=n.attr("target");if(r)b.open(a,r);else if(y.eventCallback){var s="hitCallback";i[s]=function(){M&&($.clearTimer(M),m(a))},M=$.startTimer(M,y.eventTimeout,i[s])}}}g(i)}function h(t){var n=e.extend({hitType:"pageview"},t);g(n)}function g(t){if("function"===e.type(b.ga)&&"function"===e.type(b.ga.getAll))for(var n=b.ga.getAll(),i=0,o=n.length;o>i;i++)b.ga(n[i].get("name")+".send",t)}function m(e){document.location=e}var v=t.Plugin("analytics",{methods:{_setup:i,_resize:o},utilities:{_delegate:a}}),y={autoEvents:!1,filetypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,eventCallback:!1,eventTimeout:1e3,scrollDepth:!1,scrollStops:5},b=t.window,w=t.$window,x=null,$=v.functions,C=v.events,T=!1,k="analytics-event",E="data-"+k,S={},j=null,H="Site",M=null}(jQuery,Formstone);