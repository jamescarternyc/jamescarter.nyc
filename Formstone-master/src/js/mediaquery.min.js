!function(e,t,i){"use strict";function n(t){t=t||{};for(var i in w)w.hasOwnProperty(i)&&(p[i]=t[i]?e.merge(t[i],p[i]):p[i]);p=e.extend(p,t),p.minWidth.sort(m.sortDesc),p.maxWidth.sort(m.sortAsc),p.minHeight.sort(m.sortDesc),p.maxHeight.sort(m.sortAsc);for(var n in w)if(w.hasOwnProperty(n)){y[n]={};for(var a in p[n])if(p[n].hasOwnProperty(a)){var o=window.matchMedia("("+w[n]+": "+(p[n][a]===1/0?1e5:p[n][a])+p.unit+")");o.addListener(s),y[n][p[n][a]]=o}}s()}function a(e,t,i){var n=g.matchMedia(t),a=c(n.media);b[a]||(b[a]={mq:n,active:!0,enter:{},leave:{}},b[a].mq.addListener(l));for(var o in i)i.hasOwnProperty(o)&&b[a].hasOwnProperty(o)&&(b[a][o][e]=i[o]);l(b[a].mq)}function o(e,t){if(e)if(t){var i=c(t);b[i]&&(b[i].enter[e]&&delete b[i].enter[e],b[i].leave[e]&&delete b[i].leave[e])}else for(var n in b)b.hasOwnProperty(n)&&(b[n].enter[e]&&delete b[n].enter[e],b[n].leave[e]&&delete b[n].leave[e])}function r(){v={unit:p.unit};for(var e in w)if(w.hasOwnProperty(e))for(var t in y[e])if(y[e].hasOwnProperty(t)&&y[e][t].matches){var i="Infinity"===t?1/0:parseInt(t,10);e.indexOf("max")>-1?(!v[e]||i<v[e])&&(v[e]=i):(!v[e]||i>v[e])&&(v[e]=i)}}function s(){r(),h.trigger(f.mqChange,[v])}function l(e){var t=c(e.media),i=b[t],n=e.matches?f.enter:f.leave;if(i&&i.active||!i.active&&e.matches){for(var a in i[n])i[n].hasOwnProperty(a)&&i[n][a].apply(i.mq);i.active=!0}}function c(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function d(){return v}var u=t.Plugin("mediaquery",{utilities:{_initialize:n,state:d,bind:a,unbind:o},events:{mqChange:"mqchange"}}),p={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},f=e.extend(u.events,{enter:"enter",leave:"leave"}),h=t.$window,g=h[0],m=u.functions,v=null,b=[],y={},w={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone);