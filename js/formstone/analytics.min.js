!function(e,t,i){"use strict";function n(){$=t.$body}function a(){b.scrollDepth&&u()}function o(){if(arguments.length&&"object"!==e.type(arguments[0]))if("destroy"===arguments[0])s.apply(this);else{var t=Array.prototype.slice.call(arguments,1);switch(arguments[0]){case"pageview":h.apply(this,t);break;case"event":f.apply(this,t)}}else r.apply(this,arguments);return null}function r(t){!k&&$.length&&(k=!0,b=e.extend(b,t||{}),b.autoEvents&&$.find("a").not("["+H+"]").each(l),b.scrollDepth&&(u(),w.on(C.scroll,c).one(C.load,a)),$.on(C.click,"*["+H+"]",p))}function s(){k&&$.length&&(w.off(C.namespace),$.off(C.namespace),k=!1)}function l(){var t,n=e(this),a="undefined"!==e.type(n[0].href)?n[0].href:"",o=document.domain.split(".").reverse(),r=null!==a.match(o[1]+"."+o[0]);if(a.match(/^mailto\:/i))t="Email, Click, "+a.replace(/^mailto\:/i,"");else if(a.match(/^tel\:/i))t="Telephone, Click, "+a.replace(/^tel\:/i,"");else if(a.match(b.filetypes)){var s=/[.]/.exec(a)?/[^.]+$/.exec(a):i;t="File, Download:"+s[0]+", "+a.replace(/ /g,"-")}else r||(t="ExternalLink, Click, "+a);t&&n.attr(H,t)}function c(){x.startTimer(W,250,d)}function d(){for(var e,i=w.scrollTop()+t.windowHeight,n=1/b.scrollStops,a=n,o=1;o<=b.scrollStops;o++)e=Math.round(100*a).toString(),!E[M][e].passed&&i>E[M][e].edge&&(E[M][e].passed=!0,f({eventCategory:"ScrollDepth",eventAction:M,eventLabel:e})),a+=n}function u(){var t,i=e.mediaquery("state"),n=$.outerHeight(),a={},o=1/b.scrollStops,r=o,s=0;i.minWidth&&(M="MinWidth:"+i.minWidth+"px");for(var l=1;l<=b.scrollStops;l++)s=parseInt(n*r),t=Math.round(100*r).toString(),a[t]={edge:"100"===t?s-10:s,passsed:E[M]&&E[M][t]?E[M][t].passed:!1},r+=o;E[M]=a}function p(t){var i=e(this),n=i.attr("href"),a=i.data(T).split(",");b.eventCallback&&t.preventDefault();for(var o in a)a.hasOwnProperty(o)&&(a[o]=e.trim(a[o]));f({eventCategory:a[0],eventAction:a[1],eventLabel:a[2]||n,eventValue:a[3],nonInteraction:a[4]},i)}function f(t,i){var n=(y.location,e.extend({hitType:"event"},t));if("undefined"!==e.type(i)&&!i.attr("data-analytics-stop")){var a="undefined"!==e.type(i[0].href)?i[0].href:"",o=!a.match(/^mailto\:/i)&&!a.match(/^tel\:/i)&&a.indexOf(":")<0?y.location.protocol+"//"+y.location.hostname+"/"+a:a;if(""!==o){var r=i.attr("target");if(r)y.open(o,r);else if(b.eventCallback){var s="hitCallback";n[s]=function(){_&&(x.clearTimer(_),m(o))},_=x.startTimer(_,b.eventTimeout,n[s])}}}g(n)}function h(t){var i=e.extend({hitType:"pageview"},t);g(i)}function g(t){if("function"===e.type(y.ga)&&"function"===e.type(y.ga.getAll))for(var i=y.ga.getAll(),n=0,a=i.length;a>n;n++)y.ga(i[n].get("name")+".send",t)}function m(e){document.location=e}var v=t.Plugin("analytics",{methods:{_setup:n,_resize:a},utilities:{_delegate:o}}),b={autoEvents:!1,filetypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,eventCallback:!1,eventTimeout:1e3,scrollDepth:!1,scrollStops:5},y=t.window,w=t.$window,$=null,x=v.functions,C=v.events,k=!1,T="analytics-event",H="data-"+T,E={},W=null,M="Site",_=null}(jQuery,Formstone);