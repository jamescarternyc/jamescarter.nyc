!function(e,t,n){"use strict";function i(){$=t.$body}function a(){b.scrollDepth&&u()}function o(){if(arguments.length&&"object"!==e.type(arguments[0]))if("destroy"===arguments[0])s.apply(this);else{var t=Array.prototype.slice.call(arguments,1);switch(arguments[0]){case"pageview":h.apply(this,t);break;case"event":f.apply(this,t)}}else r.apply(this,arguments);return null}function r(t){!k&&$.length&&(k=!0,b=e.extend(b,t||{}),b.autoEvents&&$.find("a").not("["+H+"]").each(l),b.scrollDepth&&(u(),w.on(C.scroll,c).one(C.load,a)),$.on(C.click,"*["+H+"]",p))}function s(){k&&$.length&&(w.off(C.namespace),$.off(C.namespace),k=!1)}function l(){var r,t=e(this),i="undefined"!==e.type(t[0].href)?t[0].href:"",a=document.domain.split(".").reverse(),o=null!==i.match(a[1]+"."+a[0]);if(i.match(/^mailto\:/i))r="Email, Click, "+i.replace(/^mailto\:/i,"");else if(i.match(/^tel\:/i))r="Telephone, Click, "+i.replace(/^tel\:/i,"");else if(i.match(b.filetypes)){var s=/[.]/.exec(i)?/[^.]+$/.exec(i):n;r="File, Download:"+s[0]+", "+i.replace(/ /g,"-")}else o||(r="ExternalLink, Click, "+i);r&&t.attr(H,r)}function c(e){x.startTimer(W,250,d)}function d(){for(var a,e=w.scrollTop()+t.windowHeight,n=1/b.scrollStops,i=n,o=1;o<=b.scrollStops;o++)a=Math.round(100*i).toString(),!E[j][a].passed&&e>E[j][a].edge&&(E[j][a].passed=!0,f({eventCategory:"ScrollDepth",eventAction:j,eventLabel:a})),i+=n}function u(){var s,t=e.mediaquery("state"),n=$.outerHeight(),i={},a=1/b.scrollStops,o=a,r=0;t.minWidth&&(j="MinWidth:"+t.minWidth+"px");for(var l=1;l<=b.scrollStops;l++)r=parseInt(n*o),s=Math.round(100*o).toString(),i[s]={edge:"100"===s?r-10:r,passsed:E[j]&&E[j][s]?E[j][s].passed:!1},o+=a;E[j]=i}function p(t){var n=e(this),i=n.attr("href"),a=n.data(T).split(",");b.eventCallback&&t.preventDefault();for(var o in a)a.hasOwnProperty(o)&&(a[o]=e.trim(a[o]));f({eventCategory:a[0],eventAction:a[1],eventLabel:a[2]||i,eventValue:a[3],nonInteraction:a[4]},n)}function f(t,n){var a=(y.location,e.extend({hitType:"event"},t));if("undefined"!==e.type(n)&&!n.attr("data-analytics-stop")){var o="undefined"!==e.type(n[0].href)?n[0].href:"",r=!o.match(/^mailto\:/i)&&!o.match(/^tel\:/i)&&o.indexOf(":")<0?y.location.protocol+"//"+y.location.hostname+"/"+o:o;if(""!==r){var s=n.attr("target");if(s)y.open(r,s);else if(b.eventCallback){var l="hitCallback";a[l]=function(){M&&(x.clearTimer(M),m(r))},M=x.startTimer(M,b.eventTimeout,a[l])}}}g(a)}function h(t){var n=e.extend({hitType:"pageview"},t);g(n)}function g(t){if("function"===e.type(y.ga)&&"function"===e.type(y.ga.getAll))for(var n=y.ga.getAll(),i=0,a=n.length;a>i;i++)y.ga(n[i].get("name")+".send",t)}function m(e){document.location=e}var v=t.Plugin("analytics",{methods:{_setup:i,_resize:a},utilities:{_delegate:o}}),b={autoEvents:!1,filetypes:/\.(zip|exe|dmg|pdf|doc.*|xls.*|ppt.*|mp3|txt|rar|wma|mov|avi|wmv|flv|wav)$/i,eventCallback:!1,eventTimeout:1e3,scrollDepth:!1,scrollStops:5},y=t.window,w=t.$window,$=null,x=v.functions,C=v.events,k=!1,T="analytics-event",H="data-"+T,E={},W=null,j="Site",M=null}(jQuery,Formstone);