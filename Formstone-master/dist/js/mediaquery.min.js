!function(e,t){"use strict";function n(t){t=t||{};for(var n in b)b.hasOwnProperty(n)&&(u[n]=t[n]?e.merge(t[n],u[n]):u[n]);u=e.extend(u,t),u.minWidth.sort(g.sortDesc),u.maxWidth.sort(g.sortAsc),u.minHeight.sort(g.sortDesc),u.maxHeight.sort(g.sortAsc);for(var i in b)if(b.hasOwnProperty(i)){y[i]={};for(var o in u[i])if(u[i].hasOwnProperty(o)){var a=window.matchMedia("("+b[i]+": "+(u[i][o]===1/0?1e5:u[i][o])+u.unit+")");a.addListener(r),y[i][u[i][o]]=a}}r()}function i(e,t,n){var i=f.matchMedia(t),o=l(i.media);v[o]||(v[o]={mq:i,active:!0,enter:{},leave:{}},v[o].mq.addListener(s));for(var a in n)n.hasOwnProperty(a)&&v[o].hasOwnProperty(a)&&(v[o][a][e]=n[a]);s(v[o].mq)}function o(e,t){if(e)if(t){var n=l(t);v[n]&&(v[n].enter[e]&&delete v[n].enter[e],v[n].leave[e]&&delete v[n].leave[e])}else for(var i in v)v.hasOwnProperty(i)&&(v[i].enter[e]&&delete v[i].enter[e],v[i].leave[e]&&delete v[i].leave[e])}function a(){m={unit:u.unit};for(var e in b)if(b.hasOwnProperty(e))for(var t in y[e])if(y[e].hasOwnProperty(t)&&y[e][t].matches){var n="Infinity"===t?1/0:parseInt(t,10);e.indexOf("max")>-1?(!m[e]||n<m[e])&&(m[e]=n):(!m[e]||n>m[e])&&(m[e]=n)}}function r(){a(),h.trigger(p.mqChange,[m])}function s(e){var t=l(e.media),n=v[t],i=e.matches?p.enter:p.leave;if(n&&n.active||!n.active&&e.matches){for(var o in n[i])n[i].hasOwnProperty(o)&&n[i][o].apply(n.mq);n.active=!0}}function l(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function c(){return m}var d=t.Plugin("mediaquery",{utilities:{_initialize:n,state:c,bind:i,unbind:o},events:{mqChange:"mqchange"}}),u={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},p=e.extend(d.events,{enter:"enter",leave:"leave"}),h=t.$window,f=h[0],g=d.functions,m=null,v=[],y={},b={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone);