!function(e,t){"use strict";function i(t){t=t||{};for(var i in y)y.hasOwnProperty(i)&&(u[i]=t[i]?e.merge(t[i],u[i]):u[i]);u=e.extend(u,t),u.minWidth.sort(g.sortDesc),u.maxWidth.sort(g.sortAsc),u.minHeight.sort(g.sortDesc),u.maxHeight.sort(g.sortAsc);for(var n in y)if(y.hasOwnProperty(n)){b[n]={};for(var a in u[n])if(u[n].hasOwnProperty(a)){var o=window.matchMedia("("+y[n]+": "+(u[n][a]===1/0?1e5:u[n][a])+u.unit+")");o.addListener(s),b[n][u[n][a]]=o}}s()}function n(e,t,i){var n=h.matchMedia(t),a=l(n.media);v[a]||(v[a]={mq:n,active:!0,enter:{},leave:{}},v[a].mq.addListener(r));for(var o in i)i.hasOwnProperty(o)&&v[a].hasOwnProperty(o)&&(v[a][o][e]=i[o]);r(v[a].mq)}function a(e,t){if(e)if(t){var i=l(t);v[i]&&(v[i].enter[e]&&delete v[i].enter[e],v[i].leave[e]&&delete v[i].leave[e])}else for(var n in v)v.hasOwnProperty(n)&&(v[n].enter[e]&&delete v[n].enter[e],v[n].leave[e]&&delete v[n].leave[e])}function o(){m={unit:u.unit};for(var e in y)if(y.hasOwnProperty(e))for(var t in b[e])if(b[e].hasOwnProperty(t)&&b[e][t].matches){var i="Infinity"===t?1/0:parseInt(t,10);e.indexOf("max")>-1?(!m[e]||i<m[e])&&(m[e]=i):(!m[e]||i>m[e])&&(m[e]=i)}}function s(){o(),f.trigger(p.mqChange,[m])}function r(e){var t=l(e.media),i=v[t],n=e.matches?p.enter:p.leave;if(i&&i.active||!i.active&&e.matches){for(var a in i[n])i[n].hasOwnProperty(a)&&i[n][a].apply(i.mq);i.active=!0}}function l(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function c(){return m}var d=t.Plugin("mediaquery",{utilities:{_initialize:i,state:c,bind:n,unbind:a},events:{mqChange:"mqchange"}}),u={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},p=e.extend(d.events,{enter:"enter",leave:"leave"}),f=t.$window,h=f[0],g=d.functions,m=null,v=[],b={},y={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone);