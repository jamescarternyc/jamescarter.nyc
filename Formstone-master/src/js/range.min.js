!function(e,t,i){"use strict";function n(e){x.iterate.call(C,c)}function a(){C=e(y.element)}function o(e){e.formatter||(e.formatter=v),e.min=parseFloat(this.attr("min"))||0,e.max=parseFloat(this.attr("max"))||100,e.step=parseFloat(this.attr("step"))||1,e.digits=e.step.toString().length-e.step.toString().indexOf("."),e.value=parseFloat(this.val())||e.min+(e.max-e.min)/2;var t="";e.vertical="vertical"===this.attr("orient")||e.vertical,e.disabled=this.is(":disabled"),t+='<div class="'+w.track+'">',e.fill&&(t+='<span class="'+w.fill+'"></span>'),t+='<div class="'+w.handle+'">',t+='<span class="'+w.marker+'"></span>',t+="</div>",t+="</div>";var i=[w.base,e.customClass,e.vertical?w.vertical:"",e.labels?w.labels:"",e.disabled?w.disabled:""];if(this.addClass(w.element).wrap('<div class="'+i.join(" ")+'"></div>').after(t),e.$container=this.parents(y.base),e.$track=e.$container.find(y.track),e.$fill=e.$container.find(y.fill),e.$handle=e.$container.find(y.handle),e.$output=e.$container.find(y.output),e.labels){var n='<span class="'+[w.label,w.label_max].join(" ")+'">'+e.formatter.call(this,e.labels.max?e.labels.max:e.max)+"</span>",o='<span class="'+[w.label,w.label_min].join(" ")+'">'+e.formatter.call(this,e.labels.max?e.labels.min:e.min)+"</span>";e.$container.prepend(e.vertical?n:o).append(e.vertical?o:n)}e.$labels=e.$container.find(y.label),this.on($.focus,e,f).on($.blur,e,h).on($.change,e,m),e.$container.fsTouch({pan:!0,axis:e.vertical?"y":"x"}).on($.panStart,e,d).on($.pan,e,u).on($.panEnd,e,p),a(),c.call(this,e)}function r(e){e.$container.off($.namespace).fsTouch("destroy"),e.$track.remove(),e.$labels.remove(),this.unwrap().removeClass(w.element).off($.namespace),a()}function s(e){e.disabled&&(this.prop("disabled",!1),e.$container.removeClass(w.disabled),e.disabled=!1)}function l(e){e.disabled||(this.prop("disabled",!0),e.$container.addClass(w.disabled),e.disabled=!0)}function c(e){e.stepCount=(e.max-e.min)/e.step,e.offset=e.$track.offset(),e.vertical?(e.trackHeight=e.$track.outerHeight(),e.handleHeight=e.$handle.outerHeight(),e.increment=e.trackHeight/e.stepCount):(e.trackWidth=e.$track.outerWidth(),e.handleWidth=e.$handle.outerWidth(),e.increment=e.trackWidth/e.stepCount);var t=(e.$el.val()-e.min)/(e.max-e.min);g(e,t,!0)}function d(e){x.killEvent(e);var t=e.data;t.disabled||(u(e),t.$container.addClass(w.focus))}function u(e){x.killEvent();var t=e.data,i=0;t.disabled||(i=t.vertical?1-(e.pageY-t.offset.top)/t.trackHeight:(e.pageX-t.offset.left)/t.trackWidth,g(t,i))}function p(e){x.killEvent(e);var t=e.data;t.disabled||t.$container.removeClass(w.focus)}function f(e){e.data.$container.addClass("focus")}function h(e){e.data.$container.removeClass("focus")}function g(e,t,i){e.increment>1&&(t=e.vertical?Math.round(t*e.stepCount)*e.increment/e.trackHeight:Math.round(t*e.stepCount)*e.increment/e.trackWidth),0>t&&(t=0),t>1&&(t=1);var n=(e.min-e.max)*t;n=-parseFloat(n.toFixed(e.digits)),e.$fill.css(e.vertical?"height":"width",100*t+"%"),e.$handle.css(e.vertical?"bottom":"left",100*t+"%"),n+=e.min,n!==e.value&&n&&i!==!0&&(e.$el.val(n).trigger($.change,[!0]),e.value=n)}function m(e,t){var i=e.data;if(!t&&!i.disabled){var n=(i.$el.val()-i.min)/(i.max-i.min);g(i,n)}}function v(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}var b=t.Plugin("range",{widget:!0,defaults:{customClass:"",fill:!1,formatter:!1,labels:{max:!1,min:!1},vertical:!1},classes:["track","handle","fill","marker","labels","label","label_min","label_max","vertical","focus","disabled"],methods:{_construct:o,_destruct:r,_resize:n,enable:s,disable:l,resize:c}}),y=b.classes,w=y.raw,$=b.events,x=b.functions,C=[]}(jQuery,Formstone);