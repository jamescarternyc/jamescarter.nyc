function changeColor(){var t=$("#red").val(),e=$("#green").val(),i=$("#blue").val();$("#newColor").css("background-color","rgb("+t+","+e+","+i+")")}var color=$(".selected").css("background-color"),$canvas=$("canvas"),context=$canvas[0].getContext("2d"),lastEvent,mouseDown=!1;$(".controls").on("click","li",function(){$(this).siblings().removeClass("selected"),$(this).addClass("selected"),color=$(this).css("background-color")}),$("#revealColorSelect").click(function(t){changeColor(),$("#colorSelect").toggle()}),$("input[type=range]").change(changeColor),$("#addNewColor").click(function(){var t=$("<li></li>");t.css("background-color",$("#newColor").css("background-color")),$(".controls ul").append(t),t.click()}),$canvas.mousedown(function(t){lastEvent=t,mouseDown=!0}).mousemove(function(t){mouseDown&&(context.beginPath(),context.moveTo(lastEvent.offsetX,lastEvent.offsetY),context.lineTo(t.offsetX,t.offsetY),context.strokeStyle=color,context.stroke(),lastEvent=t)}).mouseup(function(){mouseDown=!1}).mouseleave(function(){$canvas.mouseup()});