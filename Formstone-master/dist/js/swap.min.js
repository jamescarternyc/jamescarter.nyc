!function(e,t){"use strict";function n(t){t.enabled=!1,t.active=!1,t.classes=e.extend(!0,{},p,t.classes),t.target=this.data(u+"-target"),t.$target=e(t.target).addClass(t.classes.raw.target),t.mq="(max-width:"+(t.maxWidth===1/0?"100000px":t.maxWidth)+")";var n=this.data(u+"-linked");t.linked=n?"[data-"+u+'-linked="'+n+'"]':!1;var i=this.data(u+"-group");t.group=i?"[data-"+u+'-group="'+i+'"]':!1,t.$swaps=e().add(this).add(t.$target),this.on(h.click+t.dotGuid,t,c)}function i(t){t.collapse||!t.group||e(t.group).filter("[data-"+u+"-active]").length||e(t.group).eq(0).attr("data-"+u+"-active","true"),t.onEnable=this.data(u+"-active")||!1,e.fsMediaquery("bind",t.rawGuid,t.mq,{enter:function(){s.call(t.$el,t,!0)},leave:function(){l.call(t.$el,t,!0)}})}function a(t){e.fsMediaquery("unbind",t.rawGuid),t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")).off(h.namespace)}function o(t,n){if(t.enabled&&!t.active){t.group&&!n&&e(t.group).not(t.$el).not(t.linked)[d.namespaceClean]("deactivate",!0);var i=t.group?e(t.group).index(t.$el):null;t.$swaps.addClass(t.classes.raw.active),n||t.linked&&e(t.linked).not(t.$el)[d.namespaceClean]("activate",!0),this.trigger(h.activate,[i]),t.active=!0}}function r(t,n){t.enabled&&t.active&&(t.$swaps.removeClass(t.classes.raw.active),n||t.linked&&e(t.linked).not(t.$el)[d.namespaceClean]("deactivate",!0),this.trigger(h.deactivate),t.active=!1)}function s(t,n){t.enabled||(t.enabled=!0,t.$swaps.addClass(t.classes.raw.enabled),n||e(t.linked).not(t.$el)[d.namespaceClean]("enable"),this.trigger(h.enable),t.onEnable?(t.active=!1,o.call(this,t)):(t.active=!0,r.call(this,t)))}function l(t,n){t.enabled&&(t.enabled=!1,t.$swaps.removeClass([t.classes.raw.enabled,t.classes.raw.active].join(" ")),n||e(t.linked).not(t.$el)[d.namespaceClean]("disable"),this.trigger(h.disable))}function c(e){f.killEvent(e);var t=e.data;t.active&&t.collapse?r.call(t.$el,t):o.call(t.$el,t)}var d=t.Plugin("swap",{widget:!0,defaults:{collapse:!0,maxWidth:1/0},classes:["target","enabled","active"],events:{activate:"activate",deactivate:"deactivate",enable:"enable",disable:"disable"},methods:{_construct:n,_postConstruct:i,_destruct:a,activate:o,deactivate:r,enable:s,disable:l}}),u=d.namespace,p=d.classes,h=d.events,f=d.functions}(jQuery,Formstone);